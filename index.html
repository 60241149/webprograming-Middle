<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Call of Duty Intro</title>

    <!-- í”„ë¦¬ë¡œë“œ -->
    <link
      rel="preload"
      as="image"
      href="asset/Webprograming_middlevideo_firstpage.png"
    />
    <link
      rel="preload"
      as="image"
      href="asset/Webprograming_middlevideo_NAME.png"
    />
    <link
      rel="preload"
      as="image"
      href="asset/Webprograming_middlevideo_press.png"
    />
    <link
      rel="preload"
      as="image"
      href="asset/Webprograming_middlevideo_main.png"
    />

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main class="stage">
      <!-- 1) ì²« í™”ë©´ ë°°ê²½ -->
      <img
        id="intel"
        class="bg bg-current"
        src="asset/Webprograming_middlevideo_firstpage.png"
        alt=""
        decoding="async"
        fetchpriority="high"
      />

      <!-- 2) ì²« í™”ë©´ ë¡œê³  -->
      <div class="logo-wrap">
        <img
          src="asset/Webprograming_middlevideo_NAME.png"
          alt="Call of Duty logo"
          class="logo"
        />
      </div>

      <!-- 3) ë‘ ë²ˆì§¸ í™”ë©´ ë°°ê²½ (CSS ë³€ìˆ˜ --next-bg ë¡œ ì„¤ì •) -->
      <div class="bg bg-next" aria-hidden="true"></div>

      <div class="bg bg-about" aria-hidden="true"></div>

      <img
        class="about-logo"
        src="asset/Webprograming_middlevideo_name2.png"
        alt="Call of Duty About Logo"
      />

      <!-- ABOUT í™”ë©´ ì™¼ìª½ ë©”ë‰´ -->
      <nav class="about-menu" aria-label="About section menu">
        <a class="menu-item item-1" href="#campaign"
          ><img src="asset/1.png" alt="CAMPAIGN"
        /></a>
        <a class="menu-item item-2" href="#Weapon"
          ><img src="asset/2.png" alt="Weapon"
        /></a>
        <a class="menu-item item-3" href="#Spec ops"
          ><img src="asset/3.png" alt="Spec ops"
        /></a>
        <a class="menu-item item-4" href="#Credits"
          ><img src="asset/4.png" alt="Credits"
        /></a>
        <a class="menu-item item-5" href="#Options"
          ><img src="asset/5.png" alt="Options"
        /></a>
      </nav>

      <img
        class="about-soldier"
        src="asset/character.png"
        alt="Soldier character"
      />

      <!-- 4) ë‘ ë²ˆì§¸ í™”ë©´ì—ì„œ ë‚˜íƒ€ë‚  ì •ë³´ ì´ë¯¸ì§€ (í•œ ë²ˆë§Œ) -->
      <img
        class="battle-info"
        src="asset/Webprograming_middlevideo_text.png"
        alt="About the game text"
      />

      <div class="white-shape">
        <button class="cta-preorder">PREORDER NOW</button>
      </div>

      <!-- 6) ì²« í™”ë©´ì—ì„œ ëˆ„ë¥´ëŠ” ë²„íŠ¼ ì´ë¯¸ì§€ -->
      <img
        class="press"
        src="asset/Webprograming_middlevideo_press.png"
        alt="PRESS START"
      />

      <div class="white-shape facebook-box">
        <img src="asset/facebook.png" alt="Facebook" class="facebook-icon" />
      </div>

      <div class="white-shape twitter-box">
        <img src="asset/twitter.png" alt="twitter" class="twitter-icon" />
      </div>

      <div class="white-shape instagram-box">
        <img src="asset/instagram.png" alt="Instagram" class="instagram-icon" />
      </div>

      <div class="facebook-box">
        <a
          href="https://www.facebook.com"
          target="_blank"
          aria-label="Facebook"
        >
          <img src="asset/facebook.png" alt="Facebook" class="facebook-icon" />
        </a>
      </div>

      <!-- Twitter -->
      <div class="twitter-box">
        <a href="https://twitter.com" target="_blank" aria-label="Twitter">
          <img src="asset/twitter.png" alt="Twitter" class="twitter-icon" />
        </a>
      </div>

      <!-- Instagram -->
      <div class="instagram-box">
        <a
          href="https://www.instagram.com"
          target="_blank"
          aria-label="Instagram"
        >
          <img
            src="asset/instagram.png"
            alt="Instagram"
            class="instagram-icon"
          />
        </a>
      </div>

      <div class="top-menu">
        <div class="menu-item">Home</div>
        <div class="menu-item">Games</div>
        <div class="menu-item">Platforms</div>
        <div
          class="menu-item"
          a
          href="about.png"
          class="menu-item"
          id="nav-about"
          role="button"
          aria-label="Open About"
        >
          About
        </div>

        <div class="menu-item search">
          <img src="asset/magnifier.png" alt="Search" class="search-icon" />
        </div>
      </div>

      <section class="trailer" aria-label="Release trailer">
        <h2 class="trailer-title">RELEASE TRAILER</h2>
        <a
          class="trailer-card"
          href="https://www.youtube.com/watch?v=bH1lHCirCGI"
          target="_blank"
          rel="noopener"
        >
          <img
            src="asset/trailerthumbnail.png"
            alt="Call of Duty Trailer Thumbnail"
            class="trailer-thumb"
          />
          <span class="play">â–¶</span>
        </a>
      </section>
      <!-- BGM (ì²˜ìŒì—” ë©ˆì¶¤/ë®¤íŠ¸) -->
      <audio
        id="bgm"
        src="asset/blockbuster.mp3"
        preload="auto"
        loop
        muted
      ></audio>

      <!-- ì†Œë¦¬ ë²„íŠ¼ + ë³¼ë¥¨ ìŠ¬ë¼ì´ë” -->
      <div class="audio-wrap" aria-label="Background music controls">
        <button
          id="audioBtn"
          class="audio-btn"
          aria-pressed="false"
          aria-label="Turn sound on"
        >
          <span class="ico ico-mute" aria-hidden="true">ðŸ”‡</span>
          <span class="ico ico-sound" aria-hidden="true">ðŸ”Š</span>
        </button>
        <input
          id="audioVol"
          class="audio-vol"
          type="range"
          min="0"
          max="1"
          step="0.01"
          value="0.5"
          aria-label="Volume"
        />
      </div>
    </main>

    <script>
      // ë¡œë“œ ì™„ë£Œ í‘œì‹œ(ë¡œê³  íŽ˜ì´ë“œì¸ ë“±)
      const intel = document.getElementById("intel");
      if (intel.complete) document.body.classList.add("loaded");
      else
        intel.addEventListener("load", () =>
          document.body.classList.add("loaded")
        );

      // í´ë¦­ â†’ ì¦‰ì‹œ ì–´ë‘¡ê²Œ â†’ 0.5ì´ˆ ë’¤ ë‹¤ìŒ í™”ë©´
      const stage = document.querySelector(".stage");
      const press = document.querySelector(".press");
      press.addEventListener("click", () => {
        stage.classList.add("dim-now"); // ë°”ë¡œ ì–´ë‘¡ê²Œ
        setTimeout(() => {
          stage.classList.add("show-next"); // ë‘ ë²ˆì§¸ í™”ë©´ ë³´ì´ê¸°
          document.querySelector(".logo-wrap").style.display = "none"; // ì²« í™”ë©´ ë¡œê³  ìˆ¨ê¹€
          press.style.display = "none"; // PRESS START ìˆ¨ê¹€
          stage.classList.remove("dim-now"); // ì–´ë‘¡ê²Œ í•´ì œ(transitionìœ¼ë¡œ ìžì—°ìŠ¤ëŸ½ê²Œ)
        }, 500);
      });

      const navAbout = document.getElementById("nav-about");

      navAbout.addEventListener("click", (e) => {
        e.preventDefault();
        stage.classList.add("to-about"); // About ìƒíƒœ ì „í™˜
      });

      // Home í´ë¦­ â†’ ì›ëž˜ í™”ë©´ìœ¼ë¡œ ë³µê·€
      document
        .querySelector(".top-menu .menu-item:first-child")
        ?.addEventListener("click", () => {
          stage.classList.remove("to-about");
        });
    </script>
    <script>
      // === BGM ì»¨íŠ¸ë¡¤ ===
      const audio = document.getElementById("bgm");
      const btn = document.getElementById("audioBtn");
      const vol = document.getElementById("audioVol");

      // ì €ìž¥ëœ ìƒíƒœê°€ ìžˆìœ¼ë©´ ë³µì› (ì„ íƒì‚¬í•­)
      const savedVol = localStorage.getItem("bgm_vol");
      const savedOn = localStorage.getItem("bgm_on") === "1";

      if (savedVol !== null) {
        vol.value = Number(savedVol);
        audio.volume = Number(savedVol);
      } else {
        audio.volume = Number(vol.value);
      }

      // ì‹œìž‘ì€ í•­ìƒ muted + paused (ìžë™ìž¬ìƒ ì •ì±… íšŒí”¼)
      audio.muted = true;

      const updateUI = () => {
        if (!audio.paused && !audio.muted) {
          btn.classList.add("is-on");
          btn.setAttribute("aria-pressed", "true");
          btn.setAttribute("aria-label", "Turn sound off");
        } else {
          btn.classList.remove("is-on");
          btn.setAttribute("aria-pressed", "false");
          btn.setAttribute("aria-label", "Turn sound on");
        }
      };

      // ë²„íŠ¼ í´ë¦­: í† ê¸€ ìž¬ìƒ/ìŒì†Œê±°
      btn.addEventListener("click", async () => {
        try {
          if (audio.paused || audio.muted) {
            audio.muted = false;
            audio.currentTime = 30; // âœ… ì‹œìž‘ ì‹œì ì„ 30ì´ˆë¡œ ì„¤ì • (ì›í•˜ëŠ” ìœ„ì¹˜ë¡œ ë³€ê²½ ê°€ëŠ¥)
            audio.volume = Number(vol.value);
            await audio.play();
            localStorage.setItem("bgm_on", "1");
          } else {
            audio.pause();
            localStorage.setItem("bgm_on", "0");
          }
          updateUI();
        } catch (e) {
          console.warn("ì˜¤ë””ì˜¤ ìž¬ìƒ ì‹¤íŒ¨:", e);
        }
      });

      // ë³¼ë¥¨ ë³€ê²½
      vol.addEventListener("input", () => {
        audio.volume = Number(vol.value);
        localStorage.setItem("bgm_vol", String(vol.value));
      });

      // íŽ˜ì´ì§€ ìž¬ë°©ë¬¸ ì‹œ ìžë™ìœ¼ë¡œ ì´ì „ on/off ë³µì› (ì‚¬ìš©ìž ì œìŠ¤ì²˜ í•„ìš” ì—†ê²Œ)
      // ë‹¨, ì¼ë¶€ iOS ë¸Œë¼ìš°ì €ëŠ” ì—¬ì „ížˆ ì²« í´ë¦­ ì „ê¹Œì§„ ìž¬ìƒì„ ë§‰ì„ ìˆ˜ ìžˆìŒ
      window.addEventListener("load", async () => {
        if (savedOn) {
          try {
            audio.muted = false;
            await audio.play();
          } catch {
            // ìžë™ ìž¬ìƒì´ ë§‰ížˆë©´ ë²„íŠ¼ ëˆ„ë¥´ë©´ ë¨
          }
        }
        updateUI();
      });

      // íƒ­ì´ ë°±ê·¸ë¼ìš´ë“œ ê°”ë‹¤ ëŒì•„ì˜¬ ë•Œ ê°€ë” ë©ˆì¶”ë©´ ì‚´ì§ ìž¬ì‹œë„
      document.addEventListener("visibilitychange", async () => {
        if (!document.hidden && savedOn && audio.paused && !audio.muted) {
          try {
            await audio.play();
          } catch {}
          updateUI();
        }
      });
    </script>
    <audio id="bgm" src="asset/blockbuster.mp3" autoplay loop></audio>
  </body>
</html>
